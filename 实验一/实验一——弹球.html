<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>201820111张海彬</title>
    <style>
        canvas {
        cursor: pointer;
        border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="400" height="300"></canvas>
    <script>
        // 用于表示球的所有细节的Ball函数
        function Ball(x, y, dx, dy, radius) {
            this.x = x;
            this.y = y;
            this.dx = dx;
            this.dy = dy;
            this.radius = radius;
            this.strokeColor = "black";
            this.fillColor = "red";
        }
        var canvas;
        var context;
        //更新窗口
        window.onload = function() {
            canvas = document.getElementById("canvas");
            context = canvas.getContext("2d");
            // 每0.01秒绘制一次画布
            setTimeout(drawFrame, 10);
        };
        
        // 这个数组用于保存画布上出现的球
        var balls = [];
        // 小球半径
        var radius = 20;
        // 创建新的ball对象
        var ball = new Ball(50,50,1,1,radius);
        // 将其保存在balls数组中
        balls.push(ball);

        //实现小球的跳动
        function drawFrame() {
            // 清除画布
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.beginPath();
        
            //给出小球当前位置
            var ball = balls[0];
            ball.x += ball.dx;
            ball.y += ball.dy; 
                   
            // 添加重力作用的效果，让球加速下落
            if ((ball.y) < canvas.height) ball.dy += 0.22;
            // 如果球碰到某一边，就反弹回来
            if ((ball.x + ball.radius > canvas.width) || (ball.x - ball.radius < 0)) {
                    ball.dx = -ball.dx;
                }
            // 如果球碰到底部，反弹回来，但慢慢地减速
            if ((ball.y + ball.radius > canvas.height) || (ball.y - ball.radius < 0)) {
                    ball.dy = -ball.dy*0.97;
                }            
            context.beginPath();
            context.fillStyle = ball.fillColor;      
            // 绘制球
            context.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
            context.lineWidth = 1;
            context.fill();
            context.stroke();
            // 10毫秒后绘制下一帧
            setTimeout(drawFrame, 10);
        }
    </script>
</body>
</html>